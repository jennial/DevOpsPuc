name: Continuous Delivery

on:
  push:
    branches:
      - main

jobs:
  continuous-delivery:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Continuous Delivery - Upload JS files
        uses: actions/upload-artifact@v4
        with:
          name: projetozip
          path: "**/*.js"

  discord:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Send message to Discord
        uses: Sniddl/discord-commits@1.6
        with:
          webhook_url: ${{ secrets.DISCORD_WEBHOOK }}
          template: "avatar-with-link"
          include-extras: true
          message: "Novo commit no repositório!"
          color: 3066993
          title: "Commit no repositório"
          description: "Um novo commit foi feito no repositório."
          author_name: "GitHub Actions"
          author_icon: "https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"
